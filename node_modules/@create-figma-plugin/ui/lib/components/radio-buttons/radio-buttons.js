import { h } from 'preact';
import { useCallback } from 'preact/hooks';
import { Stack } from '../../layout/stack/stack';
import { createClassName } from '../../utilities/create-class-name';
import styles from './radio-buttons.module.css';
const ITEM_ID_DATA_ATTRIBUTE_NAME = "data-radio-buttons-item-id";
export function RadioButtons({ disabled = false, name, onChange = function () { }, onValueChange = function () { }, options, propagateEscapeKeyDown = true, space = "small", value, ...rest }) {
    const handleChange = useCallback(function (event) {
        const id = event.currentTarget.getAttribute(ITEM_ID_DATA_ATTRIBUTE_NAME);
        const newValue = options[parseInt(id, 10)].value;
        onValueChange(newValue, name);
        onChange(event);
    }, [name, onChange, onValueChange, options]);
    const handleKeyDown = useCallback(function (event) {
        if (event.key !== "Escape") {
            return;
        }
        if (propagateEscapeKeyDown === false) {
            event.stopPropagation();
        }
        event.currentTarget.blur();
    }, [propagateEscapeKeyDown]);
    return (h("div", { class: styles.radioButtons }, h(Stack, { space: space }, options.map(function (option, index) {
        const children = typeof option.children === "undefined"
            ? `${option.value}`
            : option.children;
        const isOptionDisabled = disabled === true || option.disabled === true;
        return (h("label", { key: index, class: createClassName([
                styles.label,
                isOptionDisabled === true ? styles.disabled : null
            ]) }, h("input", { ...rest, checked: value === option.value, class: styles.input, disabled: isOptionDisabled === true, name: name, onChange: handleChange, onKeyDown: handleKeyDown, tabIndex: isOptionDisabled === true ? -1 : 0, type: "radio", value: `${option.value}`, ...{ [ITEM_ID_DATA_ATTRIBUTE_NAME]: `${index}` } }), h("div", { class: styles.fill }), h("div", { class: styles.border }), h("div", { class: styles.children }, children)));
    }))));
}
//# sourceMappingURL=radio-buttons.js.map